{"version":3,"sources":["../src/js/popup.js"],"names":["Popup","el","content","querySelector","visible","links","document","querySelectorAll","forEach","link","addEventListener","e","preventDefault","load","getAttribute","open","popupButton","close","popupBackground","url","container","xhr","XMLHttpRequest","responseType","status","innerHTML","XMLSerializer","serializeToString","response","lang","reload","setRequestHeader","send","rootUrl","style","classList","add","menu","header","hide","remove","auto","time","parseFloat","getComputedStyle","setTimeout","popup","window","innerWidth"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nclass Popup {\r\n  constructor(el) {\r\n    this.el = el;\r\n    this.content = el.querySelector('.popup__content');\r\n    this.visible = false;\r\n\r\n    this.links = document.querySelectorAll('[data-popup]');\r\n    this.links.forEach(link => {\r\n      link.addEventListener('click', (e)=>{\r\n        e.preventDefault();\r\n        this.load(link.getAttribute('href'));\r\n        this.open(link);\r\n      });\r\n    });\r\n\r\n    this.popupButton = document.querySelector('.popup__close');\r\n    this.popupButton.addEventListener('click', ()=>{\r\n      this.close();\r\n    });\r\n    this.popupBackground = document.querySelector('.popup__bg');\r\n    this.popupBackground.addEventListener('click', ()=>{\r\n      this.close();\r\n    });\r\n  }\r\n\r\n  load(url) {\r\n    let container = this.content;\r\n\r\n    let xhr = new XMLHttpRequest();\r\n    xhr.responseType = 'document';\r\n\r\n    xhr.addEventListener('load', function () {\r\n      if (xhr.status === 200) {\r\n        container.innerHTML = new XMLSerializer().serializeToString(xhr.response);\r\n        lang.reload();\r\n      } else {\r\n        container.innerHTML = `ERROR: Couldn\\'t resolve the ajax call to \"${url}\"`;\r\n      }\r\n    });\r\n\r\n    xhr.open('POST', url, true);\r\n    xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\r\n    xhr.send(\"rootUrl=\"+rootUrl);\r\n  }\r\n\r\n  open(link) {\r\n    if(!this.visible) {\r\n      this.visible = true;\r\n      this.el.style = \"transform: translateY(0)\";\r\n      this.el.classList.add('popup--visible');\r\n      if(link.getAttribute('data-popup') === 'flexible') {\r\n        this.el.classList.add('popup--flexible');\r\n      }\r\n      menu.close();\r\n      header.hide();\r\n    } else {\r\n      if(link.getAttribute('data-popup') === 'flexible') {\r\n        this.el.classList.add('popup--flexible');\r\n      } else {\r\n        this.el.classList.remove('popup--flexible');\r\n      }\r\n    }\r\n  }\r\n\r\n  close() {\r\n    this.el.classList.remove('popup--visible');\r\n    header.auto();\r\n\r\n    let time = parseFloat(getComputedStyle(this.el)['transitionDuration'])*1000;\r\n    setTimeout(()=>{\r\n\r\n      this.el.style = \"transform: translateY(-100%)\";\r\n      this.visible = false;\r\n      this.el.classList.remove('popup--flexible'); // clear possible setting\r\n\r\n    }, time);\r\n  }\r\n\r\n}\r\nlet popup = new Popup(document.querySelector('.popup'));\r\n\r\nwindow.addEventListener('resize', () => {\r\n  if(window.innerWidth > 780) {\r\n    popup.close();\r\n  }\r\n});\r\n"],"file":"popup.js"}